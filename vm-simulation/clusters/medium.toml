# NÃ˜MAD Cluster Configuration - Medium (100 nodes)
# For realistic testing, validation, intermediate demos

[cluster]
name = "nomad-medium"
description = "Medium heterogeneous cluster for realistic testing"

# ============================================================================
# Node Definitions
# ============================================================================

[nodes.cpu]
prefix = "cpu"
count = 60
cores = 64
memory_gb = 256
local_disk_gb = 500
partitions = ["compute", "short"]

[nodes.highmem]
prefix = "highmem"
count = 15
cores = 64
memory_gb = 1024
local_disk_gb = 1000
partitions = ["highmem", "compute"]

[nodes.gpu]
prefix = "gpu"
count = 25
cores = 32
memory_gb = 512
local_disk_gb = 2000
gpus = 4
gpu_type = "A100-80GB"
partitions = ["gpu"]

# ============================================================================
# Partition Definitions
# ============================================================================

[partitions.compute]
nodes = ["cpu[01-60]", "highmem[01-15]"]
default = true
max_time = "7-00:00:00"

[partitions.short]
nodes = ["cpu[01-10]"]
max_time = "4:00:00"
priority = 100

[partitions.highmem]
nodes = ["highmem[01-15]"]
max_time = "7-00:00:00"

[partitions.gpu]
nodes = ["gpu[01-25]"]
max_time = "3-00:00:00"

[partitions.debug]
nodes = ["cpu[01-02]"]
max_time = "1:00:00"
priority = 200

# ============================================================================
# Simulation Parameters
# ============================================================================

[simulation]
# Failure-prone nodes
flaky_nodes = ["cpu12", "cpu37", "gpu08", "gpu19", "highmem07"]
flaky_failure_rate = 0.18

[simulation.users]
names = [
    "alice", "bob", "charlie", "diana", "eve", "frank", "grace", "henry",
    "ivan", "julia", "kevin", "lisa", "mike", "nancy", "oscar", "paula",
    "quinn", "rachel", "steve", "tina", "uma", "victor", "wendy", "xavier"
]

[simulation.user_profiles.careful]
failure_rate = 0.05
nfs_heavy_prob = 0.1
time_overrequest = 1.2

[simulation.user_profiles.normal]
failure_rate = 0.12
nfs_heavy_prob = 0.3
time_overrequest = 1.5

[simulation.user_profiles.careless]
failure_rate = 0.25
nfs_heavy_prob = 0.7
time_overrequest = 2.0

[simulation.user_profiles.gpu_heavy]
# GPU users: moderate failures, but specific to GPU issues
failure_rate = 0.15
nfs_heavy_prob = 0.2
time_overrequest = 1.3
gpu_preference = true

# ============================================================================
# Summary
# ============================================================================
# Total: 100 nodes
#   - 60 CPU standard (64c, 256GB)
#   - 15 CPU highmem (64c, 1TB)
#   - 25 GPU (32c, 512GB, 4x A100)
# 
# Cores: 60*64 + 15*64 + 25*32 = 5,600
# GPUs: 100
# Memory: 60*256 + 15*1024 + 25*512 = 43,520 GB
